# ==========================================
# render.yaml - Configurazione Render
# Facebook Auto Publisher - VERSIONE SICURA
# ==========================================

services:
  - type: cron
    name: fb-auto-publisher
    env: python
    region: frankfurt
    
    # Schedule: Alle 10:00 e 15:00 ogni giorno
    schedule: "0 10,15 * * *"
    
    # Build e start
    buildCommand: pip install -r requirements.txt
    startCommand: python fb_auto_publisher.py
    
    # Repository
    repo: https://github.com/B3no97/fb-auto-publisher.git
    
    branch: main
    
    # Python version
    runtime: python-3.11
    
    # Variabili d'ambiente
    # NOTA: Le variabili SENSIBILI vanno configurate nel Dashboard Render!
    envVars:
      # === VARIABILI PUBBLICHE (sicure da committare) ===
      
      - key: DB_HOST
        value: gestionale-auto-simonebenolli-bf2d.e.aivencloud.com
      
      - key: DB_PORT
        value: 19352
      
      - key: DB_NAME
        value: gestionale_auto
      
      - key: DB_USER
        value: avnadmin
      
      - key: FB_PAGE_ID
        value: 875722978961810
      
      - key: MAX_POSTS
        value: 1
      
      - key: PYTHONUNBUFFERED
        value: 1
      
      # === VARIABILI SENSIBILI ===
      # CONFIGURA MANUALMENTE NEL DASHBOARD RENDER:
      # 
      # DB_PASSWORD = [nuova password da Aiven Console]
      # FB_ACCESS_TOKEN = [nuovo token permanente da Facebook]
      #
      # NON inserire questi valori qui! Usa il dashboard:
      # Dashboard → Service → Environment → Add Environment Variable
      
      - key: DB_PASSWORD
        sync: false  # Configura nel dashboard
      
      - key: FB_ACCESS_TOKEN
        sync: false  # Configura nel dashboard

    # Piano gratuito
    plan: starter